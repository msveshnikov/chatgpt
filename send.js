import TelegramBot from "node-telegram-bot-api";
import { readTrial, readOpened } from "./db.js";
import dotenv from "dotenv";
dotenv.config({ override: true });

const bot = new TelegramBot(process.env.TELEGRAM_KEY);
const trial = readTrial();
const opened = readOpened();

const users = Object.keys(trial).filter((chatId) => !opened[chatId]);
// every 100 milliseconds pop one element from trial
setInterval(() => {
    const chatId = users.pop();
    if (!chatId) return;
    console.log(chatId);
    bot.sendMessage(
        chatId,
        `ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ð»Ð¸ Ð²ÐµÑ€ÑÐ¸ÑŽ GPT-3.5 Ð² Ð½Ð°ÑˆÐµÐ¼ Ð±Ð¾Ñ‚Ðµ! ðŸš€

Ð’ Ð½Ð¾Ð²Ð¾Ð¹ Ð²ÐµÑ€ÑÐ¸Ð¸:
        
â€¢ Ð¿Ð¾Ð²Ñ‹ÑÐ¸Ð»Ð¸ ÑÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð². Ð¡Ñ‚Ð°Ð»Ð° Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð° Ð¾Ð¿Ñ‚Ð¸Ð¼Ð¸Ð·Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ð°Ñ, Ð±Ð¾Ð»ÐµÐµ Ñ€ÐµÑÐ¿Ð¾Ð½ÑÐ¸Ð²Ð½Ð°Ñ Ð²ÐµÑ€ÑÐ¸Ñ GPT, ÐºÐ¾Ñ‚Ð¾Ñ€ÑƒÑŽ OpenAI Ð¿Ñ€ÐµÐ´Ð²Ð°Ñ€Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ñ‚ÐµÑÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð»Ð° Ð½ÐµÐºÐ¾Ñ‚Ð¾Ñ€Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ.
        
â€¢ ÑƒÐ»ÑƒÑ‡ÑˆÐµÐ½Ð½Ð°Ñ Ð¸Ð½Ñ‚ÐµÑ€Ð¿Ñ€ÐµÑ‚Ð°Ñ†Ð¸Ñ Ñ€ÑƒÑÑÐºÐ¾Ð³Ð¾ ÑÐ·Ñ‹ÐºÐ°. Ð¢ÐµÐ¿ÐµÑ€ÑŒ GPT-3.5 Ð½Ð°Ð¼Ð½Ð¾Ð³Ð¾ Ð»ÑƒÑ‡ÑˆÐµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ñ Ñ€ÑƒÑÑÐºÐ¸Ð¼ ÑÐ·Ñ‹ÐºÐ¾Ð¼, Ð¿Ð¾ÑÑ‚Ð¾Ð¼Ñƒ Ð¼Ð¾Ð¶Ð½Ð¾ Ð²Ñ‹ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ð°Ð²Ñ‚Ð¾Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ñ‡Ð¸Ðº Telegram.
        
â€¢ Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ñ Ð±Ð¾Ð»ÐµÐµ Ð´Ð»Ð¸Ð½Ð½Ñ‹Ñ… "ÑÐ²ÑÐ·Ð½Ñ‹Ñ…" Ñ‚ÐµÐºÑÑ‚Ð¾Ð². ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ð½Ð°Ñ Ð¼Ð¾Ð´ÐµÐ»ÑŒ Ð·Ð°Ð¿Ð¾Ð¼Ð¸Ð½Ð°ÐµÑ‚ Ð±Ã³Ð»ÑŒÑˆÐ¸Ðµ Ð¾Ð±ÑŠÐµÐ¼Ñ‹ Ñ‚ÐµÐºÑÑ‚Ð°, Ð° ÑÑ‚Ð¾ Ð·Ð½Ð°Ñ‡Ð¸Ñ‚, Ñ‡Ñ‚Ð¾ Ð²Ð°ÑˆÐ¸ ÑÐ³ÐµÐ½ÐµÑ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð½Ñ‹Ðµ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹ Ð±ÑƒÐ´ÑƒÑ‚ Ð²ÑÑ‘ Ð±Ð¾Ð»ÐµÐµ ÑÐ²ÑÐ·Ð½Ñ‹Ð¼Ð¸ Ð¸ Ð»Ð¾Ð³Ð¸Ñ‡Ð½Ñ‹Ð¼Ð¸.
        
Ð”Ð¾ Ð²ÑÑ‚Ñ€ÐµÑ‡Ð¸ Ð² ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ¼ Ð°Ð¿Ð´ÐµÐ¹Ñ‚Ðµ Ð¸ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾Ð¹ Ð¿Ñ€Ð¾Ð±Ñ‹ Ð½Ð¾Ð²Ð¾Ð¹ Ð²ÐµÑ€ÑÐ¸Ð¸! ðŸ‘
https://t.me/maxsoft_chat_gpt_group ðŸ¤—`
    )
        .then(() => {})
        .catch((e) => {
            console.error(e.message);
        });
}, 100);


